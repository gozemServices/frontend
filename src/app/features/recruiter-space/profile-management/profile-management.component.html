<div class="flex flex-col items-center p-6 bg-gray-50 w-full mt-4">

  <!-- Profile Header -->
  <div class="text-center mb-6">
    <h2 class="text-3xl font-semibold text-gray-800">{{ 'PROFILE_MANAGEMENT' | translate }}</h2>
    <p class="text-lg text-gray-600">{{ 'PROFILE_DESCRIPTION' | translate }}</p>
  </div>

  <!-- Profile Avatar -->
  <div class="mb-6">
    <img [src]="avatarUrl" alt="Profile Avatar" class="w-32 h-32 rounded-full object-cover mb-4 border-4 border-gray-300">
    <input type="file" (change)="onAvatarChange($event)" class="block w-full text-gray-700 border rounded-md py-2 px-3"/>
    <p class="text-sm text-gray-500 mt-2 text-center">{{ 'PROFILE_PICTURE' | translate }}</p>
  </div>

  <!-- Personal Information Form -->
  <div class="w-full bg-white shadow-xl rounded-lg p-8 mb-8">
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()" class="space-y-6">
      
      <div class="space-y-4">
        <div>
          <label for="firstName" class="block text-sm font-medium text-gray-900">{{ 'FIRST_NAME' | translate }}</label>
          <div class="mt-2">
            <input id="firstName" formControlName="firstName" type="text" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
            <div *ngIf="formControls['firstName'].invalid && (formControls['firstName'].touched || formControls['firstName'].dirty)" class="text-red-500 text-sm">
              <div *ngIf="formControls['firstName'].errors?.['required']">{{ 'FIRST_NAME_REQUIRED' | translate }}</div>
            </div>
          </div>
        </div>

        <div>
          <label for="lastName" class="block text-sm font-medium text-gray-900">{{ 'LAST_NAME' | translate }}</label>
          <div class="mt-2">
            <input id="lastName" formControlName="lastName" type="text" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
            <div *ngIf="formControls['lastName'].invalid && (formControls['lastName'].touched || formControls['lastName'].dirty)" class="text-red-500 text-sm">
              <div *ngIf="formControls['lastName'].errors?.['required']">{{ 'LAST_NAME_REQUIRED' | translate }}</div>
            </div>
          </div>
        </div>
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-gray-900">{{ 'EMAIL' | translate }}</label>
        <div class="mt-2">
          <input id="email" formControlName="email" type="email" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="formControls['email'].invalid && (formControls['email'].touched || formControls['email'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="formControls['email'].errors?.['required']">{{ 'EMAIL_REQUIRED' | translate }}</div>
            <div *ngIf="formControls['email'].errors?.['email']">{{ 'INVALID_EMAIL' | translate }}</div>
          </div>
        </div>
      </div>

      <div>
        <label for="phone" class="block text-sm font-medium text-gray-900">{{ 'PHONE' | translate }}</label>
        <div class="mt-2">
          <input id="phone" formControlName="phone" type="text" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="formControls['phone'].invalid && (formControls['phone'].touched || formControls['phone'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="formControls['phone'].errors?.['required']">{{ 'PHONE_REQUIRED' | translate }}</div>
          </div>
        </div>
      </div>

      <button type="submit" [disabled]="profileForm.invalid" class="w-fit bg-[#AF4E64] text-white py-3 px-2 cursor-pointer rounded-md hover:bg-[#701C2F] transition-colors">{{ 'SAVE_PROFILE' | translate }}</button>
    </form>
  </div>

  <!-- Company Information Form -->
  <div class="w-full bg-white shadow-xl rounded-lg p-8 mb-8">
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()" class="space-y-6">
      <div>
        <label for="companyName" class="block text-sm font-medium text-gray-900">{{ 'COMPANY_NAME' | translate }}</label>
        <div class="mt-2">
          <input id="companyName" formControlName="companyName" type="text" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="formControls['companyName'].invalid && (formControls['companyName'].touched || formControls['companyName'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="formControls['companyName'].errors?.['required']">{{ 'COMPANY_NAME_REQUIRED' | translate }}</div>
          </div>
        </div>
      </div>

      <div>
        <label for="companyEmail" class="block text-sm font-medium text-gray-900">{{ 'COMPANY_EMAIL' | translate }}</label>
        <div class="mt-2">
          <input id="companyEmail" formControlName="companyEmail" type="email" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="formControls['companyEmail'].invalid && (formControls['companyEmail'].touched || formControls['companyEmail'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="formControls['companyEmail'].errors?.['required']">{{ 'COMPANY_EMAIL_REQUIRED' | translate }}</div>
            <div *ngIf="formControls['companyEmail'].errors?.['email']">{{ 'INVALID_COMPANY_EMAIL' | translate }}</div>
          </div>
        </div>
      </div>

      <div>
        <label for="companyWebsite" class="block text-sm font-medium text-gray-900">{{ 'COMPANY_WEBSITE' | translate }}</label>
        <div class="mt-2">
          <input id="companyWebsite" formControlName="companyWebsite" type="text" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="formControls['companyWebsite'].invalid && (formControls['companyWebsite'].touched || formControls['companyWebsite'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="formControls['companyWebsite'].errors?.['required']">{{ 'COMPANY_WEBSITE_REQUIRED' | translate }}</div>
            <div *ngIf="formControls['companyWebsite'].errors?.['pattern']">{{ 'INVALID_COMPANY_WEBSITE' | translate }}</div>
          </div>
        </div>
      </div>

      <button type="submit" [disabled]="profileForm.invalid" class="w-fit bg-[#AF4E64] text-white py-3 px-2 cursor-pointer rounded-md hover:bg-[#701C2F] transition-colors">{{ 'SAVE_PROFILE' | translate }}</button>
    </form>
  </div>

  <!-- Password Change Section -->
  <div class="w-full bg-white shadow-xl rounded-lg p-8 mb-8">
    <form [formGroup]="updatePasswordForm" (ngSubmit)="changePassword()" class="space-y-6">
      <div>
        <label for="password" class="block text-sm font-medium text-gray-900">{{ 'NEW_PASSWORD' | translate }}</label>
        <div class="mt-2">
          <input id="password" formControlName="password" type="password" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="passwordFormControls['password'].invalid && (passwordFormControls['password'].touched || passwordFormControls['password'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="passwordFormControls['password'].errors?.['required']">{{ 'PASSWORD_REQUIRED' | translate }}</div>
            <div *ngIf="passwordFormControls['password'].errors?.['minlength']">{{ 'PASSWORD_MIN_LENGTH' | translate }}</div>
          </div>
        </div>
      </div>

      <div>
        <label for="confirmPassword" class="block text-sm font-medium text-gray-900">{{ 'CONFIRM_PASSWORD' | translate }}</label>
        <div class="mt-2">
          <input id="confirmPassword" formControlName="confirmPassword" type="password" required class="w-full rounded-sm border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <div *ngIf="passwordFormControls['confirmPassword'].invalid && (passwordFormControls['confirmPassword'].touched || passwordFormControls['confirmPassword'].dirty)" class="text-red-500 text-sm">
            <div *ngIf="passwordFormControls['confirmPassword'].errors?.['required']">{{ 'CONFIRM_PASSWORD_REQUIRED' | translate }}</div>
            <div *ngIf="passwordFormControls['confirmPassword'].errors?.['passwordMismatch']">{{ 'PASSWORD_MISMATCH' | translate }}</div>
          </div>
        </div>
      </div>

      <button type="submit" [disabled]="profileForm.invalid" class="w-fit bg-[#4CAF50] text-white py-3 px-2 cursor-pointer rounded-md hover:bg-[#388E3C] transition-colors">{{ 'CHANGE_PASSWORD' | translate }}</button>
    </form>
  </div>

</div>
