<div class="mt-4">
  <!-- Main layout -->
  <div class="flex flex-col">
    <!-- Sidebar Navigation -->
    <nav class="flex w-full bg-white p-6 mt-4 shadow-custom lg:block">
      <ul class="w-full flex items-center space-x-4 justify-center">
        <li><a href="#" class="text-primary font-medium hover:underline">Dashboard</a></li>
        <li><a href="#" class="text-gray-700 hover:text-primary">Saved CVs</a></li>
        <li><a href="#" class="text-gray-700 hover:text-primary">Job Posts</a></li>
        <li><a href="#" class="text-gray-700 hover:text-primary">Settings</a></li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-6">
      <h2 class="text-2xl font-bold mb-6 text-darkShade">Candidates</h2>

      <!-- Applied Filters -->
      <div class="mb-6 flex flex-wrap gap-4">
        <div *ngFor="let filter of appliedFilters" class="inline-flex items-center gap-2 bg-green-500/50 text-white px-3 py-1 rounded-full">
          <span>{{ filter.value }}</span>
          <button (click)="removeFilter(filter.category, filter.value)" class="text-red-500 font-bold">&times;</button>
        </div>
      </div>

      <!-- Filters Panel -->
      <aside class="bg-white p-4 rounded-md shadow-custom mb-6 flex flex-wrap gap-4">
        <!-- Job Title -->
        <div>
          <label for="jobTitle" class="block text-sm font-medium text-gray-700">Job Title</label>
          <input
            id="jobTitle"
            (keydown)="handleKeydown($event, 'jobTitles')"
            type="text"
            placeholder="E.g., Software Engineer"
            class="mt-1 border border-mediumGray rounded-md px-2 py-1"
          />
        </div>

        <!-- Language -->
        <div>
          <label for="language" class="block text-sm font-medium text-gray-700">Language</label>
          <input
            id="language"
            (keydown)="handleKeydown($event, 'languages')"
            type="text"
            placeholder="E.g., English, French"
            class="mt-1 border border-mediumGray rounded-md px-2 py-1"
          />
        </div>

        <!-- Skills -->
        <div>
          <label for="skill" class="block text-sm font-medium text-gray-700">Skill</label>
          <input
            id="skill"
            (keydown)="handleKeydown($event, 'skills')"
            type="text"
            placeholder="E.g., HTML, Python"
            class="mt-1 border border-mediumGray rounded-md px-2 py-1"
          />
        </div>

        <!-- Apply Filter Button -->
        <div class="mt-2">
          <button
            (click)="applyFilters()"
            class="bg-primary text-white px-4 py-2 rounded hover:bg-primaryDark transition"
          >
            Apply Filters
          </button>
        </div>
      </aside>

      <!-- CV Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        @if(errorMessage) {<div class="text-red-500">{{errorMessage}}</div>}
        <ng-container *ngIf="filteredCvList.length > 0; else noResults">
          <div
            *ngFor="let applicant of filteredCvList"
            class="bg-white p-4 rounded-md shadow-custom hover:shadow-lg transition"
          >
            <app-cv-item [cvInfos]="applicant"></app-cv-item>
          </div>
        </ng-container>
        <ng-template #noResults>
          <p class="text-center text-gray-500">No results match the selected criteria.</p>
        </ng-template>
      </div>
    </main>
  </div>
</div>